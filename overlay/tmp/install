#!/bin/sh

set -euo pipefail
export BF_E=`basename ${0}`


#======================================================================================================================
# Get esh version.
#======================================================================================================================

cd /tmp

ESH_VERSION=$(cat ESH_BUILD)
bf-echo "esh version ${ESH_VERSION}."


#======================================================================================================================
# Install esh template engine.
#======================================================================================================================

bf-echo "Installing esh v${ESH_VERSION}..."
apk add --no-cache esh=${ESH_VERSION} && bf-done \
    || bf-error "esh not installed."


#======================================================================================================================
# Set timezone.
#======================================================================================================================

bf-tz "Europe/London"


#======================================================================================================================
# Cleanup.
#======================================================================================================================

bf-echo "Removing .empty files..."
rm /etc/bf/init.d/.empty
rm /etc/bf/src/.empty
rm /etc/bf/templates/.empty
rm /usr/lib/bf/inc/.empty
bf-done
