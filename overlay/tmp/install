#!/bin/bash

set -euo pipefail
export BF_E=`basename ${0}`


#======================================================================================================================
# Remove pre-existing busybox executables, and replace with busybox.
#======================================================================================================================

X=`busybox --list`
IGNORE="cmp dpkg dpkg-deb"

bf-echo "Removing executables and installing busybox..."
for A in ${X} ; do

    # continue if the busybox executable is in the ignore list
    if printf "%s\0" ${IGNORE} | busybox grep -Fxqz -- "${A}"; then
        continue
    fi

    # remove executable if it exists
    echo "Removing ${A}..." && busybox rm -f /bin/${A} /usr/bin/${A}

done

busybox --install
bf-done


#======================================================================================================================
# Set timezone.
#======================================================================================================================

bf-tz "Europe/London"
