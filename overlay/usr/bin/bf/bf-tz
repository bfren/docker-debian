#!/bin/sh

set -euo pipefail


#======================================================================================================================
# Check arguments.
#   1   Valid timezone (e.g. Europe/London)
#======================================================================================================================

[[ -z "${1-}" ]] && bf-error "You must provide a timezone." "bf-tz"
TZ=${1}
ZONE_INFO=/usr/share/zoneinfo/${TZ}


#======================================================================================================================
# Set the timezone.
#======================================================================================================================

# check the specified timezone exists
[[ -f "${ZONE_INFO}" ]] || bf-error "${TZ} is not a recognised timezone." "bf-tz"

# set timezone info
bf-echo "Setting timezone to ${TZ}..." "bf-tz"
busybox rm -f /etc/localtime
busybox ln ${ZONE_INFO} /etc/localtime
bf-done "bf-tz"
